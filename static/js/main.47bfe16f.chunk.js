(this.webpackJsonpscheduler=this.webpackJsonpscheduler||[]).push([[0],{13:function(e,t,a){},21:function(e,t,a){e.exports=a(46)},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(20),c=a.n(i),s=(a(26),a(27),a(6)),o=a.n(s);a(28);function l(e){var t=o()("day-list__item",{"day-list__item--selected":e.selected,"day-list__item--full":0===e.spots});return r.a.createElement("li",{"data-testid":"day",onClick:function(){return e.setDay(e.name)},className:t},r.a.createElement("h2",{className:"text--regular"},e.name),r.a.createElement("h3",{className:"text--light"},function(e){return 1===e.spots?e.spots+" spot remaining":e.spots>1?e.spots+" spots remaining":0===e.spots?"no spots remaining":void 0}(e)))}function m(e){var t=e.days.map((function(t){return r.a.createElement(l,{key:t.id,name:t.name,spots:t.spots,selected:t.name===e.value,setDay:e.onChange})}));return r.a.createElement("ul",null,t)}function u(e){return r.a.createElement("header",{className:"appointment__time"},r.a.createElement("h4",{className:"text--semi-bold"},e.time),r.a.createElement("hr",{className:"appointment__separator"}))}function d(e){return r.a.createElement("main",{className:"appointment__add"},r.a.createElement("img",{onClick:e.onAdd,className:"appointment__add-button",src:"images/add.png",alt:"Add"}))}function p(e){return r.a.createElement("main",{className:"appointment__card appointment__card--show"},r.a.createElement("section",{className:"appointment__card-left"},r.a.createElement("h2",{className:"text--regular"},e.student),r.a.createElement("section",{className:"interviewer"},r.a.createElement("h4",{className:"text--light"},"Interviewer"),r.a.createElement("h3",{className:"text--regular"},e.interviewer))),r.a.createElement("section",{className:"appointment__card-right"},r.a.createElement("section",{className:"appointment__actions"},r.a.createElement("img",{onClick:function(){return e.onEdit()},className:"appointment__actions-button",src:"images/edit.png",alt:"Edit"}),r.a.createElement("img",{onClick:function(){return e.onDelete("ask for confirmation before deleting")},className:"appointment__actions-button",src:"images/trash.png",alt:"Delete"}))))}var v=a(2);a(29);function E(e){var t=o()("button",{"button--confirm":e.confirm,"button--danger":e.danger});return r.a.createElement("button",{className:t,onClick:e.onClick,disabled:e.disabled},e.children)}a(30),a(31);function f(e){var t=o()("interviewers__item",{"interviewers__item--selected":e.selected});return r.a.createElement("li",{className:t,onClick:e.setInterviewer},r.a.createElement("img",{className:"interviewers__item-image",src:e.avatar,alt:e.name}),e.selected&&e.name)}var _=function(e){var t=e.interviewers.map((function(t){return r.a.createElement(f,{key:t.id,name:t.name,avatar:t.avatar,selected:t.id===e.value,setInterviewer:function(){return e.onChange(t.id)}})}));return r.a.createElement("section",{className:"interviewers"},r.a.createElement("h4",{className:"interviewers__header text--light"},"Interviewer"),r.a.createElement("ul",{className:"interviewers__list"},t))};a(13);function b(e){var t=Object(n.useState)(e.student||""),a=Object(v.a)(t,2),i=a[0],c=a[1],s=Object(n.useState)(e.interviewer||null),o=Object(v.a)(s,2),l=o[0],m=o[1],u=Object(n.useState)(""),d=Object(v.a)(u,2),p=d[0],f=d[1];return r.a.createElement("main",{className:"appointment__card appointment__card--create"},r.a.createElement("section",{className:"appointment__card-left"},r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},autoComplete:"off"},r.a.createElement("input",{className:"appointment__create-input text--semi-bold",name:"name",type:"text",placeholder:"Enter Student Name",value:i,onChange:function(e){f(""),c(e.target.value)},"data-testid":"student-name-input"}),r.a.createElement("section",{className:"appointment__validation"},p)),r.a.createElement(_,{interviewers:e.interviewers,value:l,onChange:m})),r.a.createElement("section",{className:"appointment__card-right"},r.a.createElement("section",{className:"appointment__actions"},r.a.createElement(E,{onClick:function(){c(""),m(null),e.onCancel()},danger:!0},"Cancel"),r.a.createElement(E,{onClick:function(){if(i&&l)return f(""),e.onSave(i,l);l||f("Please select an interviewer"),i||f("Student name cannot be blank")},confirm:!0},"Save"))))}function g(e){return r.a.createElement("main",{className:"appointment__card appointment__card--status"},r.a.createElement("img",{className:"appointment__status-image",src:"images/status.png",alt:"Loading"}),r.a.createElement("h1",{className:"text--semi-bold"},e.message))}function h(e){return r.a.createElement("main",{className:"appointment__card appointment__card--confirm"},r.a.createElement("h1",{className:"text--semi-bold"},e.message),r.a.createElement("section",{className:"appointment__actions"},r.a.createElement(E,{danger:!0,onClick:e.onCancel},"Cancel"),r.a.createElement(E,{danger:!0,onClick:function(){return e.onConfirm()}},"Confirm")))}function w(e){return r.a.createElement("main",{className:"appointment__card appointment__card--error"},r.a.createElement("section",{className:"appointment__error-message"},r.a.createElement("h1",{className:"text--semi-bold"},"Error"),r.a.createElement("h3",{className:"text--light"},e.message)),r.a.createElement("img",{onClick:e.onClose,className:"appointment__error-close",src:"images/close.png",alt:"Close"}))}var N=a(11);function O(e){var t=function(e){var t=Object(n.useState)(e),a=Object(v.a)(t,2),r=a[0],i=a[1],c=Object(n.useState)([e]),s=Object(v.a)(c,2),o=s[0],l=s[1];return{mode:r,transition:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?(l((function(e){return Object(N.a)(e)})),i(e)):(l((function(t){return[].concat(Object(N.a)(t),[e])})),i(e))},back:function(){if(o.length>1){var e=Object(N.a)(o);e.pop(),l(e),i(e[e.length-1])}}}}(e.interview?"SHOW":"EMPTY"),a=t.mode,i=t.transition,c=t.back;function s(t,a){var n={student:t,interviewer:a};i("SAVING"),e.bookInterview(e.id,n).then((function(){i("SHOW")})).catch((function(e){i("ERROR_SAVE",!0)}))}var o=function(t){t?i("CONFIRM"):(i("DELETING",!0),e.cancelInterview(e.id).then((function(){i("EMPTY")})).catch((function(e){i("ERROR_DELETE",!0)})))};return r.a.createElement("article",{className:"appointment","data-testid":"appointment"},r.a.createElement(u,{time:e.time}),"EMPTY"===a&&r.a.createElement(d,{onAdd:function(){return i("CREATE")}}),"SHOW"===a&&r.a.createElement(p,{student:e.interview.student,interviewer:e.interview.interviewer.name,onDelete:o,onEdit:function(){i("EDIT")}}),"CREATE"===a&&r.a.createElement(b,{interviewers:e.interviewers,onSave:s,onCancel:c}),"EDIT"===a&&r.a.createElement(b,{student:e.interview.student,interviewer:e.interview.interviewer.id,interviewers:e.interviewers,onSave:s,onCancel:c}),"SAVING"===a&&r.a.createElement(g,{message:"Saving"}),"DELETING"===a&&r.a.createElement(g,{message:"Deleting"}),"CONFIRM"===a&&r.a.createElement(h,{message:"Are you sure you would like to delete?",onCancel:c,onConfirm:o}),"ERROR_DELETE"===a&&r.a.createElement(w,{onClose:c,message:"Could not delete appointment"}),"ERROR_SAVE"===a&&r.a.createElement(w,{onClose:c,message:"Could not save appointment"}))}var y=a(10);var j=a(8),C=a(1),k=a(5),I=a.n(k);function S(){var e=function(){var e=Object(n.useState)({day:"Monday",days:[],appointments:{},interviewers:{}}),t=Object(v.a)(e,2),a=t[0],r=t[1];function i(e){var t,n={},r=0;a.days.map((function(e){return a.day===e.name?t=e.id-1:null})),void 0!==t&&(a.days[t].appointments.map((function(t){return e["".concat(t)].interview?null:r+=1})),n=Object(C.a)(Object(C.a)({},a.days),{},Object(j.a)({},t,Object(C.a)(Object(C.a)({},a.days[t]),{},{spots:r}))));var i=Object.values(n);return i.length>0?i:null}return Object(n.useEffect)((function(){I.a.get("http://54.236.160.67:8001/api/debug/reset").then((function(){Promise.all([I.a.get("http://54.236.160.67:8001/api/days"),I.a.get("http://54.236.160.67:8001/api/appointments"),I.a.get("http://54.236.160.67:8001/api/interviewers")]).then((function(e){r((function(t){return e[0].data?Object(C.a)(Object(C.a)({},t),{},{days:e[0].data,appointments:e[1].data,interviewers:e[2].data}):Object(C.a)(Object(C.a)({},t),{},{days:e[0],appointments:e[1],interviewers:e[2]})}))}))}))}),[]),{state:a,setDay:function(e){return r((function(t){return Object(C.a)(Object(C.a)({},t),{},{day:e})}))},bookInterview:function(e,t){var n=Object(C.a)(Object(C.a)({},a.appointments[e]),{},{interview:Object(C.a)({},t)}),c=Object(C.a)(Object(C.a)({},a.appointments),{},Object(j.a)({},e,n)),s=i(c);return I.a.put("http://54.236.160.67:8001/api/appointments/".concat(e),n).then((function(){r(Object(C.a)(Object(C.a)({},a),{},{days:s,appointments:c}))}))},cancelInterview:function(e){var t=Object(C.a)(Object(C.a)({},a.appointments[e]),{},{interview:null}),n=Object(C.a)(Object(C.a)({},a.appointments),{},Object(j.a)({},e,t)),c=i(n);return I.a.delete("http://54.236.160.67:8001/api/appointments/".concat(e)).then((function(){r(Object(C.a)(Object(C.a)({},a),{},{days:c,appointments:n}))}))}}}(),t=e.state,a=e.setDay,i=e.bookInterview,c=e.cancelInterview,s=function(e,t){var a,n=[];if(0===e.days.length)return n;var r,i=Object(y.a)(e.days);try{for(i.s();!(r=i.n()).done;){var c=r.value;t===c.name&&(a=c.appointments)}}catch(m){i.e(m)}finally{i.f()}if(!a)return n;var s,o=Object(y.a)(a);try{for(o.s();!(s=o.n()).done;){var l=s.value;n.push(e.appointments["".concat(l)])}}catch(m){o.e(m)}finally{o.f()}return n}(t,t.day),o=function(e,t){var a,n=[];if(0===e.days.length)return n;var r,i=Object(y.a)(e.days);try{for(i.s();!(r=i.n()).done;){var c=r.value;t===c.name&&(a=c.interviewers)}}catch(m){i.e(m)}finally{i.f()}if(!a)return n;var s,o=Object(y.a)(a);try{for(o.s();!(s=o.n()).done;){var l=s.value;e.interviewers["".concat(l)]&&n.push(e.interviewers["".concat(l)])}}catch(m){o.e(m)}finally{o.f()}return n}(t,t.day),l=s.map((function(e){var a=function(e,t){return null===t?null:{student:t.student,interviewer:e.interviewers["".concat(t.interviewer)]}}(t,e.interview);return r.a.createElement(O,{key:e.id,id:e.id,time:e.time,interview:a,interviewers:o,bookInterview:i,cancelInterview:c})}));return r.a.createElement("main",{className:"layout"},r.a.createElement("section",{className:"sidebar"},r.a.createElement("img",{className:"sidebar--centered",src:"images/logo.png",alt:"Interview Scheduler"}),r.a.createElement("hr",{className:"sidebar__separator sidebar--centered"}),r.a.createElement("nav",{className:"sidebar__menu"},r.a.createElement(m,{days:t.days,value:t.day,onChange:a})),r.a.createElement("img",{className:"sidebar__lhl sidebar--centered"})),r.a.createElement("section",{className:"schedule"},l,r.a.createElement(O,{key:"last",time:"5pm/"})))}c.a.render(r.a.createElement(S,null),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.47bfe16f.chunk.js.map